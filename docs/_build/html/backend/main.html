<!DOCTYPE html>

<html lang="en" data-content_root="../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>API: Main Application (FastAPI) &#8212; Parkinson Dashboard 1.0.0 documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=5ecbeea2" />
    <link rel="stylesheet" type="text/css" href="../_static/basic.css?v=686e5160" />
    <link rel="stylesheet" type="text/css" href="../_static/alabaster.css?v=27fed22d" />
    <script src="../_static/documentation_options.js?v=8d563738"></script>
    <script src="../_static/doctools.js?v=9bcbadda"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="API: Processing (YOLOv8 &amp; Motion)" href="processing.html" />
    <link rel="prev" title="Parkinson Dashboard Documentation" href="../index.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  

  
  

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="api-main-application-fastapi">
<h1>API: Main Application (FastAPI)<a class="headerlink" href="#api-main-application-fastapi" title="Link to this heading">¶</a></h1>
<p>The main entry point for the Parkinson Dashboard API. This handles routing and server orchestration.</p>
<section id="parkinson-motion-analysis-api">
<span id="module-main"></span><h2>Parkinson Motion Analysis API<a class="headerlink" href="#parkinson-motion-analysis-api" title="Link to this heading">¶</a></h2>
<p>FastAPI backend for the Parkinson Dashboard clinical motion analysis system.</p>
<dl class="simple">
<dt>Modules:</dt><dd><p>config.py      - Configuration, constants, and camera detection
models.py      - Pydantic request/response models
camera.py      - Camera source abstraction (RealSense, .bag)
writers.py     - Video writers (BAG, MP4, FFmpeg)
processing.py  - Video processing and analysis pipeline</p>
</dd>
<dt>Camera Modes (set via CAMERA_MODE env var):</dt><dd><p>auto           - Auto-detect RealSense cameras (DEFAULT)
mock_bag       - RealSense .bag file playback (for dev)
realsense      - Live RealSense cameras (force RealSense)</p>
</dd>
<dt>Recording Behavior:</dt><dd><dl class="simple">
<dt>RealSense cameras:</dt><dd><ul class="simple">
<li><p>.bag file (depth + RGB) for processing</p></li>
<li><p>.mp4 file (RGB only) for viewing/tagging</p></li>
</ul>
</dd>
</dl>
</dd>
<dt>Camera Priority:</dt><dd><p>Camera 0 (CAM1/Front)  is the first detected RealSense device.
Camera 1 (CAM2/Side)   is the second detected RealSense device.
If only one camera is connected, only camera1 files are recorded.</p>
</dd>
</dl>
</section>
<dl class="py function">
<dt class="sig sig-object py" id="main.cancel_processing">
<span class="sig-prename descclassname"><span class="pre">main.</span></span><span class="sig-name descname"><span class="pre">cancel_processing</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">job_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/main.html#cancel_processing"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#main.cancel_processing" title="Link to this definition">¶</a></dt>
<dd><p>Cancel a processing job.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="main.delete_csv">
<span class="sig-prename descclassname"><span class="pre">main.</span></span><span class="sig-name descname"><span class="pre">delete_csv</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/main.html#delete_csv"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#main.delete_csv" title="Link to this definition">¶</a></dt>
<dd><p>Delete a CSV file.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="main.delete_json">
<span class="sig-prename descclassname"><span class="pre">main.</span></span><span class="sig-name descname"><span class="pre">delete_json</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/main.html#delete_json"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#main.delete_json" title="Link to this definition">¶</a></dt>
<dd><p>Delete a JSON file.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="main.delete_single_video">
<span class="sig-prename descclassname"><span class="pre">main.</span></span><span class="sig-name descname"><span class="pre">delete_single_video</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/main.html#delete_single_video"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#main.delete_single_video" title="Link to this definition">¶</a></dt>
<dd><p>Delete a single video file (BAG + MP4 + metadata).</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="main.delete_video_batch">
<span class="sig-prename descclassname"><span class="pre">main.</span></span><span class="sig-name descname"><span class="pre">delete_video_batch</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">batch_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/main.html#delete_video_batch"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#main.delete_video_batch" title="Link to this definition">¶</a></dt>
<dd><p>Delete entire video batch (both cameras, BAG + MP4 + metadata).</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="main.download_bag">
<span class="sig-prename descclassname"><span class="pre">main.</span></span><span class="sig-name descname"><span class="pre">download_bag</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/main.html#download_bag"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#main.download_bag" title="Link to this definition">¶</a></dt>
<dd><p>Download a RealSense BAG file.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="main.download_csv">
<span class="sig-prename descclassname"><span class="pre">main.</span></span><span class="sig-name descname"><span class="pre">download_csv</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/main.html#download_csv"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#main.download_csv" title="Link to this definition">¶</a></dt>
<dd><p>Download a CSV file.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="main.download_json">
<span class="sig-prename descclassname"><span class="pre">main.</span></span><span class="sig-name descname"><span class="pre">download_json</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/main.html#download_json"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#main.download_json" title="Link to this definition">¶</a></dt>
<dd><p>Download a JSON file.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="main.download_video">
<span class="sig-prename descclassname"><span class="pre">main.</span></span><span class="sig-name descname"><span class="pre">download_video</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/main.html#download_video"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#main.download_video" title="Link to this definition">¶</a></dt>
<dd><p>Download a video file (MP4).</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="main.fix_mp4_codec">
<span class="sig-prename descclassname"><span class="pre">main.</span></span><span class="sig-name descname"><span class="pre">fix_mp4_codec</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/main.html#fix_mp4_codec"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#main.fix_mp4_codec" title="Link to this definition">¶</a></dt>
<dd><p>Re-encode MP4 files to browser-compatible H.264.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="main.gen_frames">
<span class="sig-prename descclassname"><span class="pre">main.</span></span><span class="sig-name descname"><span class="pre">gen_frames</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">camera_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/main.html#gen_frames"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#main.gen_frames" title="Link to this definition">¶</a></dt>
<dd><p>Generate frames from camera for MJPEG streaming.</p>
<dl class="simple">
<dt>Handles:</dt><dd><ul class="simple">
<li><p>Reading frames from camera source (via physical ID after swap)</p></li>
<li><p>Writing to MP4 files when recording</p></li>
<li><p>Adding display overlays (camera label, REC indicator)</p></li>
<li><p>JPEG encoding for streaming</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="main.get_cameras_info">
<span class="sig-prename descclassname"><span class="pre">main.</span></span><span class="sig-name descname"><span class="pre">get_cameras_info</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/main.html#get_cameras_info"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#main.get_cameras_info" title="Link to this definition">¶</a></dt>
<dd><p>Get detailed information about detected cameras.</p>
<p>Returns camera types, serials, and recording formats.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="main.get_cameras_swap_state">
<span class="sig-prename descclassname"><span class="pre">main.</span></span><span class="sig-name descname"><span class="pre">get_cameras_swap_state</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/main.html#get_cameras_swap_state"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#main.get_cameras_swap_state" title="Link to this definition">¶</a></dt>
<dd><p>Return the current camera swap state.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="main.get_physical_camera_id">
<span class="sig-prename descclassname"><span class="pre">main.</span></span><span class="sig-name descname"><span class="pre">get_physical_camera_id</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">logical_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">int</span></span></span><a class="reference internal" href="../_modules/main.html#get_physical_camera_id"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#main.get_physical_camera_id" title="Link to this definition">¶</a></dt>
<dd><p>Map a logical camera ID to its physical camera ID.</p>
<p>When SWAP_CAMERAS is False: identity mapping (0-&gt;0, 1-&gt;1).
When SWAP_CAMERAS is True:  swap mapping  (0-&gt;1, 1-&gt;0).</p>
<dl class="simple">
<dt>Logical IDs determine file naming:</dt><dd><p>Logical 0 → camera1 files (Front/Sagittale)
Logical 1 → camera2 files (Side/Frontale)</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="main.get_processing_status">
<span class="sig-prename descclassname"><span class="pre">main.</span></span><span class="sig-name descname"><span class="pre">get_processing_status</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">job_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/main.html#get_processing_status"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#main.get_processing_status" title="Link to this definition">¶</a></dt>
<dd><p>Get processing job status.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="main.get_recording_status">
<span class="sig-prename descclassname"><span class="pre">main.</span></span><span class="sig-name descname"><span class="pre">get_recording_status</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/main.html#get_recording_status"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#main.get_recording_status" title="Link to this definition">¶</a></dt>
<dd><p>Get current recording status with live metrics.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>idle | warming_up | recording | paused
duration:          seconds elapsed since recording started (None during warm-up)
warmup_remaining:  seconds left in warm-up countdown (None when not warming up)
frame_counts:      dict of camera_id -&gt; frames written to MP4
current_filenames: dict of “camN_mp4/bag” -&gt; filename (populated after warm-up)</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>status</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="main.get_system_info">
<span class="sig-prename descclassname"><span class="pre">main.</span></span><span class="sig-name descname"><span class="pre">get_system_info</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/main.html#get_system_info"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#main.get_system_info" title="Link to this definition">¶</a></dt>
<dd><p>Get system information and capabilities.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="main.get_video">
<span class="sig-prename descclassname"><span class="pre">main.</span></span><span class="sig-name descname"><span class="pre">get_video</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">video_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">request</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Request</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/main.html#get_video"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#main.get_video" title="Link to this definition">¶</a></dt>
<dd><p>Serve video with byte-range support for streaming.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="main.get_video_metadata">
<span class="sig-prename descclassname"><span class="pre">main.</span></span><span class="sig-name descname"><span class="pre">get_video_metadata</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">video_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/main.html#get_video_metadata"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#main.get_video_metadata" title="Link to this definition">¶</a></dt>
<dd><p>Read video metadata from sidecar JSON or embedded ffprobe tags.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="main.health">
<span class="sig-prename descclassname"><span class="pre">main.</span></span><span class="sig-name descname"><span class="pre">health</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/main.html#health"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#main.health" title="Link to this definition">¶</a></dt>
<dd><p>Health check endpoint.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="main.list_all_files">
<span class="sig-prename descclassname"><span class="pre">main.</span></span><span class="sig-name descname"><span class="pre">list_all_files</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/main.html#list_all_files"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#main.list_all_files" title="Link to this definition">¶</a></dt>
<dd><p>List all files organized by type.</p>
<p>Videos grouped by batch showing BAG (high-quality) + MP4 preview info.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="main.list_batches">
<span class="sig-prename descclassname"><span class="pre">main.</span></span><span class="sig-name descname"><span class="pre">list_batches</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/main.html#list_batches"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#main.list_batches" title="Link to this definition">¶</a></dt>
<dd><p>List recording batches (camera1 + camera2 pairs) and orphaned singles.</p>
<p>Primary processing file: .bag (RealSense depth + RGB)
Preview file: .mp4</p>
<p>Returns MP4 names for viewing/tagging.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="main.list_processing_jobs">
<span class="sig-prename descclassname"><span class="pre">main.</span></span><span class="sig-name descname"><span class="pre">list_processing_jobs</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/main.html#list_processing_jobs"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#main.list_processing_jobs" title="Link to this definition">¶</a></dt>
<dd><p>List all processing jobs.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="main.list_recordings">
<span class="sig-prename descclassname"><span class="pre">main.</span></span><span class="sig-name descname"><span class="pre">list_recordings</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/main.html#list_recordings"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#main.list_recordings" title="Link to this definition">¶</a></dt>
<dd><p>List MP4 video files for tagging, including patient metadata.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="main.pause_recording">
<span class="sig-prename descclassname"><span class="pre">main.</span></span><span class="sig-name descname"><span class="pre">pause_recording</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/main.html#pause_recording"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#main.pause_recording" title="Link to this definition">¶</a></dt>
<dd><p>Pause recording.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="main.refresh_cameras">
<span class="sig-prename descclassname"><span class="pre">main.</span></span><span class="sig-name descname"><span class="pre">refresh_cameras</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/main.html#refresh_cameras"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#main.refresh_cameras" title="Link to this definition">¶</a></dt>
<dd><p>Force re-detection of cameras.</p>
<p>Call this if you’ve plugged in or unplugged cameras.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="main.resume_recording">
<span class="sig-prename descclassname"><span class="pre">main.</span></span><span class="sig-name descname"><span class="pre">resume_recording</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/main.html#resume_recording"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#main.resume_recording" title="Link to this definition">¶</a></dt>
<dd><p>Resume recording.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="main.save_tagging">
<span class="sig-prename descclassname"><span class="pre">main.</span></span><span class="sig-name descname"><span class="pre">save_tagging</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="models.html#models.SaveTaggingRequest" title="models.SaveTaggingRequest"><span class="pre">SaveTaggingRequest</span></a></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/main.html#save_tagging"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#main.save_tagging" title="Link to this definition">¶</a></dt>
<dd><p>Save tagging logs as CSV.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="main.shutdown">
<span class="sig-prename descclassname"><span class="pre">main.</span></span><span class="sig-name descname"><span class="pre">shutdown</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/main.html#shutdown"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#main.shutdown" title="Link to this definition">¶</a></dt>
<dd><p>Clean up resources on shutdown.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="main.start_processing">
<span class="sig-prename descclassname"><span class="pre">main.</span></span><span class="sig-name descname"><span class="pre">start_processing</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="models.html#models.ProcessRequest" title="models.ProcessRequest"><span class="pre">ProcessRequest</span></a></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/main.html#start_processing"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#main.start_processing" title="Link to this definition">¶</a></dt>
<dd><p>Start processing a video batch.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="main.start_recording">
<span class="sig-prename descclassname"><span class="pre">main.</span></span><span class="sig-name descname"><span class="pre">start_recording</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="models.html#models.RecordingStartRequest" title="models.RecordingStartRequest"><span class="pre">RecordingStartRequest</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/main.html#start_recording"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#main.start_recording" title="Link to this definition">¶</a></dt>
<dd><p>Start recording with a warm-up period.</p>
<p>Immediately sets status to ‘warming_up’ and returns. A background thread
waits WARMUP_DURATION seconds (so auto-exposure can stabilize), then
initializes VideoWriters and sets status to ‘recording’.</p>
<p>Only active (running) cameras get writers. If one camera is offline,
only the other camera is recorded (orphan mode).</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="main.stop_recording">
<span class="sig-prename descclassname"><span class="pre">main.</span></span><span class="sig-name descname"><span class="pre">stop_recording</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/main.html#stop_recording"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#main.stop_recording" title="Link to this definition">¶</a></dt>
<dd><p>Stop recording and save files with metadata sidecars.</p>
<p>RealSense cameras produce: .bag + .mp4
If called during warm-up, cancels the warm-up before any writers are created.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="main.swap_cameras">
<span class="sig-prename descclassname"><span class="pre">main.</span></span><span class="sig-name descname"><span class="pre">swap_cameras</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/main.html#swap_cameras"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#main.swap_cameras" title="Link to this definition">¶</a></dt>
<dd><p>Toggle the logical↔physical camera swap.</p>
<p>When swapped, /camera/0 streams from physical device 1 and vice-versa.
Recordings are always saved with logical naming:</p>
<blockquote>
<div><p>camera1 = Front/Sagittale  (logical 0)
camera2 = Side/Frontale    (logical 1)</p>
</div></blockquote>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="main.video_feed">
<span class="sig-prename descclassname"><span class="pre">main.</span></span><span class="sig-name descname"><span class="pre">video_feed</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">camera_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/main.html#video_feed"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#main.video_feed" title="Link to this definition">¶</a></dt>
<dd><p>Stream MJPEG video from camera 0 or 1.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="main.view_json">
<span class="sig-prename descclassname"><span class="pre">main.</span></span><span class="sig-name descname"><span class="pre">view_json</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/main.html#view_json"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#main.view_json" title="Link to this definition">¶</a></dt>
<dd><p>View JSON file content.</p>
</dd></dl>

</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">Parkinson Dashboard</a></h1>









<search id="searchbox" style="display: none" role="search">
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" placeholder="Search"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script><h3>Navigation</h3>
<p class="caption" role="heading"><span class="caption-text">Backend API Reference</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">API: Main Application (FastAPI)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#parkinson-motion-analysis-api">Parkinson Motion Analysis API</a></li>
<li class="toctree-l2"><a class="reference internal" href="#main.cancel_processing"><code class="docutils literal notranslate"><span class="pre">cancel_processing()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#main.delete_csv"><code class="docutils literal notranslate"><span class="pre">delete_csv()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#main.delete_json"><code class="docutils literal notranslate"><span class="pre">delete_json()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#main.delete_single_video"><code class="docutils literal notranslate"><span class="pre">delete_single_video()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#main.delete_video_batch"><code class="docutils literal notranslate"><span class="pre">delete_video_batch()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#main.download_bag"><code class="docutils literal notranslate"><span class="pre">download_bag()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#main.download_csv"><code class="docutils literal notranslate"><span class="pre">download_csv()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#main.download_json"><code class="docutils literal notranslate"><span class="pre">download_json()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#main.download_video"><code class="docutils literal notranslate"><span class="pre">download_video()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#main.fix_mp4_codec"><code class="docutils literal notranslate"><span class="pre">fix_mp4_codec()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#main.gen_frames"><code class="docutils literal notranslate"><span class="pre">gen_frames()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#main.get_cameras_info"><code class="docutils literal notranslate"><span class="pre">get_cameras_info()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#main.get_cameras_swap_state"><code class="docutils literal notranslate"><span class="pre">get_cameras_swap_state()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#main.get_physical_camera_id"><code class="docutils literal notranslate"><span class="pre">get_physical_camera_id()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#main.get_processing_status"><code class="docutils literal notranslate"><span class="pre">get_processing_status()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#main.get_recording_status"><code class="docutils literal notranslate"><span class="pre">get_recording_status()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#main.get_system_info"><code class="docutils literal notranslate"><span class="pre">get_system_info()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#main.get_video"><code class="docutils literal notranslate"><span class="pre">get_video()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#main.get_video_metadata"><code class="docutils literal notranslate"><span class="pre">get_video_metadata()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#main.health"><code class="docutils literal notranslate"><span class="pre">health()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#main.list_all_files"><code class="docutils literal notranslate"><span class="pre">list_all_files()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#main.list_batches"><code class="docutils literal notranslate"><span class="pre">list_batches()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#main.list_processing_jobs"><code class="docutils literal notranslate"><span class="pre">list_processing_jobs()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#main.list_recordings"><code class="docutils literal notranslate"><span class="pre">list_recordings()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#main.pause_recording"><code class="docutils literal notranslate"><span class="pre">pause_recording()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#main.refresh_cameras"><code class="docutils literal notranslate"><span class="pre">refresh_cameras()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#main.resume_recording"><code class="docutils literal notranslate"><span class="pre">resume_recording()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#main.save_tagging"><code class="docutils literal notranslate"><span class="pre">save_tagging()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#main.shutdown"><code class="docutils literal notranslate"><span class="pre">shutdown()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#main.start_processing"><code class="docutils literal notranslate"><span class="pre">start_processing()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#main.start_recording"><code class="docutils literal notranslate"><span class="pre">start_recording()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#main.stop_recording"><code class="docutils literal notranslate"><span class="pre">stop_recording()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#main.swap_cameras"><code class="docutils literal notranslate"><span class="pre">swap_cameras()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#main.video_feed"><code class="docutils literal notranslate"><span class="pre">video_feed()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#main.view_json"><code class="docutils literal notranslate"><span class="pre">view_json()</span></code></a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="processing.html">API: Processing (YOLOv8 &amp; Motion)</a></li>
<li class="toctree-l1"><a class="reference internal" href="camera.html">API: Camera Interface (RealSense/Bag)</a></li>
<li class="toctree-l1"><a class="reference internal" href="config.html">API: Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="models.html">API: Data Models (Pydantic)</a></li>
<li class="toctree-l1"><a class="reference internal" href="writers.html">API: Writers (Video &amp; Data)</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
      <li>Previous: <a href="../index.html" title="previous chapter">Parkinson Dashboard Documentation</a></li>
      <li>Next: <a href="processing.html" title="next chapter">API: Processing (YOLOv8 &amp; Motion)</a></li>
  </ul></li>
</ul>
</div>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &#169;2026, Parkinson Dashboard Team.
      
      |
      Powered by <a href="https://www.sphinx-doc.org/">Sphinx 8.1.3</a>
      &amp; <a href="https://alabaster.readthedocs.io">Alabaster 1.0.0</a>
      
      |
      <a href="../_sources/backend/main.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>